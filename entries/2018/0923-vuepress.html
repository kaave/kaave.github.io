<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>サイトのシステム入れ替え 2018年ver | kaave.github.io</title>
    <meta name="description" content="Kyousuke Abe a.k.a. kaaveのサイト。主にWeb情報ネタなど中心に色々です。この記事は「サイトのシステム入れ替え 2018年ver」について書かれています。">
    <link title="kaave.github.io" type="application/atom+xml" href="/atom.xml" rel="alternate">
  <script src="https://cdn.polyfill.io/v2/polyfill.js?features=default-3.3,Promise"></script>
  <link href="https://fonts.googleapis.com/css?family=Mukta|Ubuntu+Mono" rel="stylesheet">
  <link href="/css/kaave.css" rel="stylesheet">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@junkjunctions">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://kaave.github.io">
  <meta property="og:title" content="kaave.github.io">
  <meta property="og:description" content="Kyousuke Abe a.k.a. kaaveのサイト。主にWeb情報ネタなど中心に色々です。">
  <meta property="og:image" content="https://kaave.github.io/ogp.jpg">
    <meta property="og:title" content="サイトのシステム入れ替え 2018年ver | kaave.github.io"><meta property="og:description" content="Kyousuke Abe a.k.a. kaaveのサイト。主にWeb情報ネタなど中心に色々です。この記事は「サイトのシステム入れ替え 2018年ver」について書かれています。"><meta property="og:url" content="https://kaave.github.io/entries/2018/0923-vuepress.html"><meta property="og:image" content="https://kaave.github.io/entries/2018/0923/thumbnail.png">
    <link rel="preload" href="/assets/css/0.styles.ff3a76eb.css" as="style"><link rel="preload" href="/assets/js/app.953bc455.js" as="script"><link rel="preload" href="/assets/js/10.107f4834.js" as="script"><link rel="prefetch" href="/assets/js/5.f27e5580.js"><link rel="prefetch" href="/assets/js/2.4faa4522.js"><link rel="prefetch" href="/assets/js/3.fa5d7dc6.js"><link rel="prefetch" href="/assets/js/4.13c04526.js"><link rel="prefetch" href="/assets/js/6.952ce4b0.js"><link rel="prefetch" href="/assets/js/7.d218a362.js"><link rel="prefetch" href="/assets/js/8.f448438b.js"><link rel="prefetch" href="/assets/js/9.0e7ebef7.js"><link rel="prefetch" href="/assets/js/11.33de596a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ff3a76eb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="Root"><header id="header" role="banner" class="Header" data-v-3ad0f52c><div class="inner" data-v-3ad0f52c><h1 class="title" data-v-3ad0f52c><a href="/" class="title-link router-link-active" data-v-3ad0f52c>
        kaave.github.io
      </a></h1> <button class="hamberger -hidden-pc" data-v-3ad0f52c><div class="hamberger__inner" data-v-3ad0f52c><span class="hamberger__line" data-v-3ad0f52c></span> <span class="hamberger__line" data-v-3ad0f52c></span> <span class="hamberger__line" data-v-3ad0f52c></span></div></button> <nav class="nav -hidden-sp" data-v-3ad0f52c><ul class="nav-list" data-v-3ad0f52c><li class="nav-cell" data-v-3ad0f52c><a href="/entries/" class="nav-link router-link-active" data-v-3ad0f52c>entries</a></li><li class="nav-cell" data-v-3ad0f52c><a href="/about/" class="nav-link" data-v-3ad0f52c>about</a></li></ul> <ul class="nav-list -sns" data-v-3ad0f52c><li class="nav-cell" data-v-3ad0f52c><a href="https://twitter.com/junkjunctions" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="twitter" class="icon-twitter" data-v-3ad0f52c></span></a></li><li class="nav-cell" data-v-3ad0f52c><a href="https://www.facebook.com/kyousuke.abe.9" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="facebook" class="icon-facebook" data-v-3ad0f52c></span></a></li><li class="nav-cell" data-v-3ad0f52c><a href="https://github.com/kaave" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="github-circled" class="icon-github-circled" data-v-3ad0f52c></span></a></li><li class="nav-cell" data-v-3ad0f52c><a href="https://www.wantedly.com/users/57487254" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="wantedly" class="icon-wantedly" data-v-3ad0f52c></span></a></li></ul></nav></div></header> <main id="main" role="main" class="Main"><div class="Main__inner"><nav class="Breadcrumb" data-v-51a848ce><div class="inner" data-v-51a848ce><ol itemscope="itemscope" itemtype="http://schema.org/BreadcrumbList" class="Breadcrumb__list" data-v-51a848ce><li itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem" class="Breadcrumb__cell" data-v-51a848ce><a href="/" itemprop="item" class="Breadcrumb__link router-link-active" data-v-51a848ce><span itemprop="name" data-v-51a848ce>TOP</span></a> <meta content="0" itemprop="position" data-v-51a848ce></li><li itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem" class="Breadcrumb__cell" data-v-51a848ce><a href="/entries/" itemprop="item" class="Breadcrumb__link router-link-active" data-v-51a848ce><span itemprop="name" data-v-51a848ce>Entries</span></a> <meta content="1" itemprop="position" data-v-51a848ce></li><li itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem" class="Breadcrumb__cell" data-v-51a848ce><p itemprop="item" class="Breadcrumb__current" data-v-51a848ce><span itemprop="name" data-v-51a848ce>サイトのシステム入れ替え 2018年ver</span></p> <meta content="2" itemprop="position" data-v-51a848ce></li></ol></div></nav> <div class="content custom"><!----> <h2 id="いじりました"><a href="#いじりました" aria-hidden="true" class="header-anchor">#</a> いじりました</h2> <p>えー、またサイトのシステムをごっそり入れ替えました。今度はVuePressです。いじったところのメモがてら、エントリー投下です。
ちなみにいじった理由は今までの自前Reactバージョンのものが今見ると微妙なところが多すぎたからです。外ヅラだけはできてるけどmetaまわりとかメチャクチャじゃないかっていう。でそこ直すのもめんどくさいしさーーっていう。</p> <h3 id="テーマ"><a href="#テーマ" aria-hidden="true" class="header-anchor">#</a> テーマ</h3> <p>全部自作。互換性とか知るかー！機能面では削られちゃいますけどその気になったら自作すればよろしい。</p> <p>あとデフォルトだとstylusだったけどPostCSSに差し替えました。stylus知らないのです。PostCSSへの差し替えはとくになにも考えずにいつもどおりで問題なかったです。使うpluginだけ<code>config.js</code>に書けば大丈夫。Nuxtとおなじじゃないかな、たしか。こんな感じ。</p> <h3 id="feed"><a href="#feed" aria-hidden="true" class="header-anchor">#</a> feed</h3> <p>VuePressはその名前とは裏腹にカリカリにいじってやらないとブログっぽくなりません。例えばfeedを出力してくれないとか。というわけでこれは自前でなんとかします。</p> <p><a href="https://github.com/kaave/github-page-src/blob/7dda0424eadb7ee971a2cc583c44c678b916cc4b/src/.vuepress/enhanceApp.js#L10-L33" target="_blank" rel="noopener noreferrer">具体的にはこの辺のコード<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ですね。<code>enhanceApp.js</code>でなんとかするという。RSS生成そのものについてはnpmの<a href="https://www.npmjs.com/package/feed" target="_blank" rel="noopener noreferrer">feed<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>モジュールに頼りました。ただこの書き方だと経路の数だけ毎回出力されるので無駄なことこの上なし、うーんなんとかしたいところ…。ルートファイルを処理しているときにだけさばいてやりゃ良さそうなんじゃないって思ったんですが、その状況を判別する方法がわかんなかったです。見える変数片っ端からダンプしてみたけどどこにも落ちてなくてしょんぼり。</p> <h3 id="sitemap"><a href="#sitemap" aria-hidden="true" class="header-anchor">#</a> sitemap</h3> <p>feedと同じく出力してくれません。同じ要領で処理します。こっちは<a href="https://www.npmjs.com/package/sitemap" target="_blank" rel="noopener noreferrer">sitemap<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>モジュールでなんとかしました。って言ってますがちゃんとしたsitemapが出てるかどうか実はよくわかってないんですよね。URLいっぱい入ったファイル出たぜやったー👏までしか確認してないです〜〜〜。</p> <h3 id="ルーティング"><a href="#ルーティング" aria-hidden="true" class="header-anchor">#</a> ルーティング</h3> <p>Markdownファイルの配置がそのままルーティングになるので、Markdownの出力を使わずVueのみで完結するページもMarkdownを置いてやらないとWARNINGが出まくったりとおかしげなことになります。非常にカッコ悪い対応なので嫌なんですが、しゃあない…とおもう。たぶん。</p> <h3 id="google-tag-manager"><a href="#google-tag-manager" aria-hidden="true" class="header-anchor">#</a> Google Tag Manager</h3> <p>なんか非対応っぽい。しゃーないからGAで我慢。GAはオプションに書くだけ。Nuxtとおなじっすね。</p> <h3 id="相変わらずcircleci-github-pagesで運用"><a href="#相変わらずcircleci-github-pagesで運用" aria-hidden="true" class="header-anchor">#</a> 相変わらずCircleCI + GitHub Pagesで運用</h3> <p>独自ドメイン + Netlifyでの運用も頭をよぎりましたが、<code>kaave.github.io</code>よりいけてるドメインを思いつかなかったんでやめました。<code>kaavetek.net</code>にしようかなと思ったこともあったんですがなんかややこしいからやめよって…。ちなみに、Hardtekのパクリ。</p> <p>で、今回大変だったのがCircleCIのバージョンをv2にすることでした。何しろ片手間で使ってたからこれはしんどい。トライアンドエラーしまくりで強引に進めました。もう今回はこれでいいです。</p> <h2 id="今のところ"><a href="#今のところ" aria-hidden="true" class="header-anchor">#</a> 今のところ</h2> <p>とりあえず今出力されているファイルにはだいたいマンゾクしております。MDから出力されたHTMLに関してはassetsをインライン化したいんですけど、やれてないとこだとそれくらいですね。今の所やりかたわかんなくてやってないです。</p> <p>プロジェクト構成についてはもうちょっとうまい感じにできないかなーと思ってますが、まぁ自分のサイトだからいっかーという気持ちです。</p> <p>サイトデザインについては適当なんでどうもこうもないです。勉強がてら遷移アニメつけよっかなーと思ってますがまぁそれくらい。</p></div></div></main> <footer id="footer" class="Footer" data-v-01fefb25><div class="inner" data-v-01fefb25><h2 class="header" data-v-01fefb25>
      kaave.github.io
    </h2> <div class="container" data-v-01fefb25><ul class="nav-list" data-v-01fefb25><li class="nav-cell" data-v-01fefb25><a href="/entries/" class="nav-link router-link-active" data-v-01fefb25>entries</a></li><li class="nav-cell" data-v-01fefb25><a href="/about/" class="nav-link" data-v-01fefb25>about</a></li></ul> <ul class="nav-list -sns" data-v-01fefb25><li class="nav-cell" data-v-01fefb25><a href="https://twitter.com/junkjunctions" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="twitter" class="icon-twitter" data-v-01fefb25></span></a></li><li class="nav-cell" data-v-01fefb25><a href="https://www.facebook.com/kyousuke.abe.9" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="facebook" class="icon-facebook" data-v-01fefb25></span></a></li><li class="nav-cell" data-v-01fefb25><a href="https://github.com/kaave" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="github-circled" class="icon-github-circled" data-v-01fefb25></span></a></li><li class="nav-cell" data-v-01fefb25><a href="https://www.wantedly.com/users/57487254" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="wantedly" class="icon-wantedly" data-v-01fefb25></span></a></li></ul></div> <small class="copyright" data-v-01fefb25>
      © kaave
    </small></div></footer> <!----></div></div>
    <script src="/assets/js/10.107f4834.js" defer></script><script src="/assets/js/app.953bc455.js" defer></script>
  </body>
</html>
