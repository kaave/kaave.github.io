<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebGL入門のためにVScodeをガッチリ設定 | kaave.github.io</title>
    <meta name="description" content="Kyousuke Abe a.k.a. kaaveのサイト。主にWeb情報ネタなど中心に色々です。">
    <link title="kaave.github.io" type="application/atom+xml" href="/atom.xml" rel="alternate">
  <script src="https://cdn.polyfill.io/v2/polyfill.js?features=default-3.4,Promise"></script>
  <link href="https://fonts.googleapis.com/css?family=Mukta|Ubuntu+Mono" rel="stylesheet">
  <link href="/css/kaave.css" rel="stylesheet">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@junkjunctions">
  <meta property="og:type" content="website">
    <meta itemprop="name" content="WebGL入門のためにVScodeをガッチリ設定 | kaave.github.io"><meta itemprop="image" content="https://kaave.github.io/entries/2018/0930/thumbnail.png"><meta property="og:title" content="WebGL入門のためにVScodeをガッチリ設定 | kaave.github.io"><meta property="og:description" content="Kyousuke Abe a.k.a. kaaveのサイト。主にWeb情報ネタなど中心に色々です。この記事は「WebGL入門のためにVScodeをガッチリ設定」について書かれています。"><meta property="og:url" content="https://kaave.github.io/entries/2018/0930-webgl-vscode.html"><meta property="og:image" content="https://kaave.github.io/entries/2018/0930/thumbnail.png">
    <link rel="preload" href="/assets/css/0.styles.4955f728.css" as="style"><link rel="preload" href="/assets/js/app.1d296060.js" as="script"><link rel="preload" href="/assets/js/11.de2c1a2e.js" as="script"><link rel="prefetch" href="/assets/js/6.952ce4b0.js"><link rel="prefetch" href="/assets/js/2.59470b98.js"><link rel="prefetch" href="/assets/js/3.964d1e2e.js"><link rel="prefetch" href="/assets/js/4.3a877c4c.js"><link rel="prefetch" href="/assets/js/5.fbc977b6.js"><link rel="prefetch" href="/assets/js/7.5329389f.js"><link rel="prefetch" href="/assets/js/8.f448438b.js"><link rel="prefetch" href="/assets/js/9.70df2304.js"><link rel="prefetch" href="/assets/js/10.eb54d55f.js"><link rel="prefetch" href="/assets/js/12.d460c256.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4955f728.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="Root"><header id="header" role="banner" class="Header" data-v-3ad0f52c><div class="inner" data-v-3ad0f52c><h1 class="title" data-v-3ad0f52c><a href="/" class="title-link router-link-active" data-v-3ad0f52c>
        kaave.github.io
      </a></h1> <button class="hamberger -hidden-pc" data-v-3ad0f52c><div class="hamberger__inner" data-v-3ad0f52c><span class="hamberger__line" data-v-3ad0f52c></span> <span class="hamberger__line" data-v-3ad0f52c></span> <span class="hamberger__line" data-v-3ad0f52c></span></div></button> <nav class="nav -hidden-sp" data-v-3ad0f52c><ul class="nav-list" data-v-3ad0f52c><li class="nav-cell" data-v-3ad0f52c><a href="/entries/" class="nav-link router-link-active" data-v-3ad0f52c>entries</a></li><li class="nav-cell" data-v-3ad0f52c><a href="/about/" class="nav-link" data-v-3ad0f52c>about</a></li></ul> <ul class="nav-list -sns" data-v-3ad0f52c><li class="nav-cell" data-v-3ad0f52c><a href="https://twitter.com/junkjunctions" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="twitter" class="icon-twitter" data-v-3ad0f52c></span></a></li><li class="nav-cell" data-v-3ad0f52c><a href="https://www.facebook.com/kyousuke.abe.9" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="facebook" class="icon-facebook" data-v-3ad0f52c></span></a></li><li class="nav-cell" data-v-3ad0f52c><a href="https://github.com/kaave" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="github-circled" class="icon-github-circled" data-v-3ad0f52c></span></a></li><li class="nav-cell" data-v-3ad0f52c><a href="https://www.wantedly.com/users/57487254" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-3ad0f52c><span aria-label="wantedly" class="icon-wantedly" data-v-3ad0f52c></span></a></li></ul></nav></div></header> <main id="main" role="main" class="Main"><div class="Main__inner"><nav class="Breadcrumb" data-v-51a848ce><div class="inner" data-v-51a848ce><ol itemscope="itemscope" itemtype="http://schema.org/BreadcrumbList" class="Breadcrumb__list" data-v-51a848ce><li itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem" class="Breadcrumb__cell" data-v-51a848ce><a href="/" itemprop="item" class="Breadcrumb__link router-link-active" data-v-51a848ce><span itemprop="name" data-v-51a848ce>TOP</span></a> <meta content="0" itemprop="position" data-v-51a848ce></li><li itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem" class="Breadcrumb__cell" data-v-51a848ce><a href="/entries/" itemprop="item" class="Breadcrumb__link router-link-active" data-v-51a848ce><span itemprop="name" data-v-51a848ce>Entries</span></a> <meta content="1" itemprop="position" data-v-51a848ce></li><li itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem" class="Breadcrumb__cell" data-v-51a848ce><p itemprop="item" class="Breadcrumb__current" data-v-51a848ce><span itemprop="name" data-v-51a848ce>WebGL入門のためにVScodeをガッチリ設定</span></p> <meta content="2" itemprop="position" data-v-51a848ce></li></ol></div></nav> <div class="content custom"><!----> <h2 id="webglやるぞ！"><a href="#webglやるぞ！" aria-hidden="true" class="header-anchor">#</a> WebGLやるぞ！</h2> <p>Web開発歴10何年にしてついにWebGL入門しました。<a href="https://wgld.org" target="_blank" rel="noopener noreferrer">wgld.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>を読みながらひぃひぃ言ってます。今はまだ三角形がいっぱい出たところですがここまでが凄い大変でしたね…。</p> <p>で、WebGLっちゅーとシェーダー書くわけですが、そのための設定をVSCodeでいろいろやったのでまとめました。僕はなんか新しいことやるときはきちっと環境を作ってからじゃないとやる気が出ないタイプなんですよね。</p> <ul><li>Syntax Highlight</li> <li>Linter</li> <li>Formatter</li></ul> <p>の3点でお届けします。</p> <h3 id="syntax-highlight"><a href="#syntax-highlight" aria-hidden="true" class="header-anchor">#</a> Syntax Highlight</h3> <p><a href="https://marketplace.visualstudio.com/items?itemName=slevesque.shader" target="_blank" rel="noopener noreferrer">Shader languages support for VS Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>を入れました。</p> <p>これは入れるだけでオシマイ。とくにどうこうありませぬ。自分の環境だとこれだけで<code>.glsl</code>, <code>.frag</code>, <code>.vert</code>のいずれの形式もハイライトされました。</p> <h3 id="linter"><a href="#linter" aria-hidden="true" class="header-anchor">#</a> Linter</h3> <p><code>glslangValidator</code>というツールをVSCodeの拡張経由でかける、という形になります。というわけでまずはOS側に先述のツールを入れ込まないといけないんですが、これは<a href="https://www.khronos.org/opengles/sdk/tools/Reference-Compiler/" target="_blank" rel="noopener noreferrer">OpenGL / OpenGL ES Reference Compiler<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>のなかに含まれておるんでこいつを入れます。</p> <h4 id="os"><a href="#os" aria-hidden="true" class="header-anchor">#</a> OS</h4> <p>公式サイトから落としてガチャガチャやってもいいんですが、homebrewセットアップしてあれば以下のコマンドで一発です。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>brew <span class="token function">install</span> glslang
<span class="token comment"># ちゃんと入ったか確認</span>
glslangValidator --version
</code></pre></div><h4 id="vscode"><a href="#vscode" aria-hidden="true" class="header-anchor">#</a> VSCode</h4> <p><a href="https://marketplace.visualstudio.com/items?itemName=CADENAS.vscode-glsllint" target="_blank" rel="noopener noreferrer">GLSL Lint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>を入れます。</p> <p>入れたら<code>glslangValidator</code>のパスを通します。設定ファイルの適当なところに以下の1行を追加してください。</p> <div class="language-jsonc extra-class"><pre class="language-text"><code>// OS側でパスが通ってるのでこれだけでOKっぽい。
&quot;glsllint.glslangValidatorPath&quot;: &quot;glslangValidator&quot;
</code></pre></div><p>こんだけでOKでした。適当なコード書くとその場で怒られることを確認しましょう。</p> <p>ちなみに細かい設定に関しては調べてないです。なぜかというと僕がまだシェーダーの知識ほぼゼロなので何がいいのか悪いのかまったくわからないからです。いつか追記するかも。</p> <h3 id="fotmatter"><a href="#fotmatter" aria-hidden="true" class="header-anchor">#</a> Fotmatter</h3> <p><code>Clang-Format</code>というツールを使います。これはhomebrew経由でOSに入れるかnpm経由でワークスペースに入れるかの2択ですが、ローカルに入れて困らんものはローカルに入れましょう。</p> <h4 id="npm"><a href="#npm" aria-hidden="true" class="header-anchor">#</a> npm</h4> <p>ふつうに入れればOKです。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i -D clang-format
<span class="token comment"># or</span>
yarn add -D clang-format
</code></pre></div><h4 id="vscode-2"><a href="#vscode-2" aria-hidden="true" class="header-anchor">#</a> VSCode</h4> <p><a href="https://marketplace.visualstudio.com/items?itemName=xaver.clang-format" target="_blank" rel="noopener noreferrer">Clang-Format<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>を入れましょう。</p> <p>入れたらパスを通す必要があります。また、保存時に整形する設定も追加しましょう。以下参照。</p> <div class="language-jsonc extra-class"><pre class="language-text"><code>// ワークスペースのclang-formatを利用する
&quot;clang-format.executable&quot;: &quot;${workspaceRoot}/node_modules/.bin/clang-format&quot;,
// glsl形式のファイルを保存する際に整形
&quot;[glsl]&quot;: {
  &quot;editor.formatOnSave&quot;: true
},
</code></pre></div><p>で、このツールですけどJS(TS)にも対応しており整形してくれるんですが、Prettierとバッティングして保存のたびにいずれかのツールが自分の流儀で整形して毎回ちがうコードになるというヂゴク。ので、設定ファイルを追加してJS(TS)はスルーするようにします。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># .clang-format</span>

<span class="token comment"># 基本的な設定をGoogle準拠にする その他いろいろあるけど略</span>
<span class="token key atrule">BasedOnStyle</span><span class="token punctuation">:</span> Google
<span class="token comment"># 1行あたりのMax文字数を120文字とする</span>
<span class="token key atrule">ColumnLimit</span><span class="token punctuation">:</span> <span class="token number">120</span>
<span class="token comment"># タブ幅を4とする</span>
<span class="token key atrule">TabWidth</span><span class="token punctuation">:</span> <span class="token number">4</span>
<span class="token punctuation">---</span>
<span class="token comment"># 以下、JavaScript/TypeScriptの設定となる。</span>
<span class="token key atrule">Language</span><span class="token punctuation">:</span> JavaScript
<span class="token comment"># Clang-Formatを無効化する</span>
<span class="token key atrule">DisableFormat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><p>これでOK。</p> <p>ちなみにこの拡張ですが、普段はDisableにしておきWebGLが必要なプロジェクトのみEnableにするのがいいと思います。というのもClang-Formatがないぞエラーがバンバン出るんですよ。当たり前ですけど。今回の仕事だと使わんちゅうに、みたいな。</p> <h3 id="以上"><a href="#以上" aria-hidden="true" class="header-anchor">#</a> 以上</h3> <p>あとは書くだけです。</p> <h3 id="ちなみに"><a href="#ちなみに" aria-hidden="true" class="header-anchor">#</a> ちなみに</h3> <p>僕は<a href="https://wgld.org" target="_blank" rel="noopener noreferrer">wgld.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>の環境設定とは違い、TypeScript + webpackでやってます。<a href="https://github.com/doxas/minMatrix.js" target="_blank" rel="noopener noreferrer">minMatrix.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>も<a href="https://github.com/kaave/playground-webgl/blob/b93adfe75f06deb8cc03fbb5c8b9b09af5b92d0c/src/scripts/modules/minMatrix.ts" target="_blank" rel="noopener noreferrer">自分で書き直してTypeScript仕様にしてます<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。新しいことやるときはやっぱ型あったほうが格段に楽ですね…。</p></div></div></main> <footer id="footer" class="Footer" data-v-01fefb25><div class="inner" data-v-01fefb25><h2 class="header" data-v-01fefb25>
      kaave.github.io
    </h2> <div class="container" data-v-01fefb25><ul class="nav-list" data-v-01fefb25><li class="nav-cell" data-v-01fefb25><a href="/entries/" class="nav-link router-link-active" data-v-01fefb25>entries</a></li><li class="nav-cell" data-v-01fefb25><a href="/about/" class="nav-link" data-v-01fefb25>about</a></li></ul> <ul class="nav-list -sns" data-v-01fefb25><li class="nav-cell" data-v-01fefb25><a href="https://twitter.com/junkjunctions" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="twitter" class="icon-twitter" data-v-01fefb25></span></a></li><li class="nav-cell" data-v-01fefb25><a href="https://www.facebook.com/kyousuke.abe.9" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="facebook" class="icon-facebook" data-v-01fefb25></span></a></li><li class="nav-cell" data-v-01fefb25><a href="https://github.com/kaave" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="github-circled" class="icon-github-circled" data-v-01fefb25></span></a></li><li class="nav-cell" data-v-01fefb25><a href="https://www.wantedly.com/users/57487254" target="_blank" rel="noopener noreferrer" class="nav-link -sns" data-v-01fefb25><span aria-label="wantedly" class="icon-wantedly" data-v-01fefb25></span></a></li></ul></div> <small class="copyright" data-v-01fefb25>
      © kaave
    </small></div></footer> <!----></div></div>
    <script src="/assets/js/11.de2c1a2e.js" defer></script><script src="/assets/js/app.1d296060.js" defer></script>
  </body>
</html>
