<!doctype html>
<html data-n-head-ssr lang="ja" data-n-head="lang">
  <head data-n-head="">
    <title data-n-head="true">kaave.github.io</title><meta data-n-head="true" data-hid="description" name="description" content="愛知県在住ソフトウェアエンジニアの@kaaveこと安部亨佑のWebサイトです。"><meta data-n-head="true" data-hid="itempropName" itemprop="name" content="kaave.github.io"><meta data-n-head="true" data-hid="itempropDesc" itemprop="description" content="愛知県在住ソフトウェアエンジニアの@kaaveこと安部亨佑のWebサイトです。"><meta data-n-head="true" data-hid="itempropImage" itemprop="image" content="http://localhost:3000/images/ogp.jpg"><meta data-n-head="true" property="og:title" content="kaave.github.io"><meta data-n-head="true" property="og:description" content="愛知県在住ソフトウェアエンジニアの@kaaveこと安部亨佑のWebサイトです。"><meta data-n-head="true" property="og:image" content="http://localhost:3000/images/ogp.jpg"><meta data-n-head="true" property="og:url" content="http://localhost:3000"><meta data-n-head="true" property="og:site_name" content="kaave.github.io"><meta data-n-head="true" property="og:type" content="website"><meta data-n-head="true" charset="utf-8"><meta data-n-head="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="true" data-hid="format-detection" name="format-detection" content="email=no,telephone=no,address=no"><meta data-n-head="true" property="twitter:card" content="summary_large_image"><link data-n-head="true" rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" href="/_nuxt/6295a1b0c88350517bfa.js" as="script"><link rel="preload" href="/_nuxt/5554f126381a287eecf5.js" as="script"><link rel="preload" href="/_nuxt/6affb985f9883ce20979.js" as="script"><link rel="preload" href="/_nuxt/35c31960731efb724d46.js" as="script"><style data-vue-ssr-id="3d9b0312:0 712aabf5:0 34c68c3e:0 658d7dc3:0 3a587167:0">*,:after,:before{box-sizing:border-box}:after,:before{text-decoration:inherit;vertical-align:inherit}html{cursor:default;line-height:1.5;-moz-tab-size:4;tab-size:4;-webkit-tap-highlight-color:transparent;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;word-break:break-word}body{margin:0}h1{font-size:2em;margin:.67em 0}ol ol,ol ul,ul ol,ul ul{margin:0}hr{height:0;overflow:visible}main{display:block}nav ol,nav ul{list-style:none;padding:0}a{background-color:transparent}strong{font-weight:bolder}canvas,svg{vertical-align:middle}svg:not([fill]){fill:currentColor}svg:not(:root){overflow:hidden}button,input{margin:0}button{overflow:visible;text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}input{overflow:visible}legend{color:inherit;display:table;max-width:100%;white-space:normal}[type=checkbox],[type=radio]{padding:0}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}canvas{display:inline-block}template{display:none}[tabindex],a,button,input{touch-action:manipulation}[hidden]{display:none}[aria-busy=true]{cursor:progress}[aria-controls]{cursor:pointer}[aria-disabled=true],[disabled]{cursor:not-allowed}[aria-hidden=false][hidden]{display:inline;display:initial}[aria-hidden=false][hidden]:not(:focus){clip:rect(0,0,0,0);position:absolute}
@charset "UTF-8";a,acronym,address,body,br,button,dfn,div,figcaption,h1,h2,h3,hr,input,ins,legend,li,ol,option,p,span,strong,ul{padding:0;margin:0}html{font-size:62.5%}body{font-size:1.4rem}a,acronym,address,br,caption,dfn,div,figcaption,h1,h2,h3,ins,li,ol,p,span,strong,ul{font-size:100%;font-style:normal;font-weight:400;border:0}li,ul{list-style:none}@keyframes show-header{0%,30%{will-change:letter-spacing,opacity;letter-spacing:-.4em}to{will-change:letter-spacing,opacity;letter-spacing:.05em}}body,html{font-family:Crimson Text,Georgia,游明朝,Yu Mincho,YuMincho,Hiragino Mincho ProN,HGS明朝E,メイリオ,Meiryo,serif;color:#f0f0f0;letter-spacing:.02em;background:#111;word-spacing:1px;font-feature-settings:"palt";-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}@media (min-width:768px){.-hidden-pc{display:none!important}}@media (max-width:767px){.-hidden-sp{display:none!important}}.-sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.Content{position:relative;display:block;font-size:4.286vw;line-height:1.8;color:#f0f0f0;letter-spacing:.05em}@media (min-width:768px){.Content{font-size:1.7316vw}}@media (min-width:1040px){.Content{font-size:1.8rem}}.Content>*{position:relative;display:block;width:100%;padding-right:4vw;padding-left:4vw}@media (min-width:768px){.Content>*{padding-right:20px;padding-left:20px}}.Content>[class*=language-]{width:100%;margin:2.5em auto}@media (max-width:767px){.Content>[class*=language-]{max-width:none}}.Content p{margin-top:1em;font-size:3.75vw}@media (min-width:768px){.Content p{font-size:1.5392vw;margin:1em auto auto}}@media (min-width:1040px){.Content p{font-size:1.6rem}}.Content .header-anchor{display:none}.Content a:not(.header-anchor){color:currentColor;-webkit-text-decoration:solid underline #0d6;text-decoration:solid underline #0d6}@media (min-width:768px){.Content a:not(.header-anchor):hover{-webkit-text-decoration-color:currentColor;text-decoration-color:currentColor}}.Content a:not(.header-anchor):not([target=_blank]):before{width:100%}.Content a:not(.header-anchor) .icon{margin:auto .2em}.Content h2{margin:1.5em auto .5em;font-size:1.2em}.Content h3{margin:1.5em auto auto;font-size:1.1em;line-height:1.4;text-indent:.5em}.Content h3:before{position:absolute;top:50%;left:4vw;display:block;width:.2em;height:80%;content:"";background:hsla(0,0%,94.1%,.8);transform:translateY(-50%)}@media (min-width:768px){.Content h3:before{left:20px}}.Content h4{margin:1.5em auto auto;font-size:.9em;text-indent:.6em}.Content h4:before{position:absolute;top:50%;left:4vw;display:block;width:.2em;height:80%;content:"";background:hsla(0,0%,94.1%,.6);transform:translateY(-50%)}@media (min-width:768px){.Content h4:before{left:20px}}.Content h5{margin:1.5em auto .5em;font-size:1em}.Content h6{margin:1.5em auto .5em;font-size:.9em}.Content>ul,.Content>ul>li{padding:0}.Content>ul{width:calc(100% - 8vw);padding-left:1.2em;margin:.5em 4vw auto}@media (min-width:768px){.Content>ul{width:calc(100% - 40px);padding:1.5em 0 0 1.3em;margin:auto 20px}}.Content>ul li{width:100%;font-size:3.75vw;list-style-type:disc}@media (min-width:768px){.Content>ul li{font-size:1.5392vw;margin:auto}}@media (min-width:1040px){.Content>ul li{font-size:1.6rem}}.Content>ul ul{width:100%;padding-left:1.3em}.Content li>p{margin:.5em 0}.Content hr{height:1px;padding:0;margin:1.5em auto;background:#f0f0f0;border:0}.Content code{padding:0 .2em;margin:auto .2em;line-height:1.4;background:hsla(0,0%,94.1%,.2)}@media (min-width:768px){.Content code{font-size:1.2em}}.Content pre[class*=language-] code{padding:0;overflow:scroll;background:transparent}code[class*=language-],pre[class*=language-]{font-family:Menlo,Monaco,Courier New,monospace;font-size:14px;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;color:#76d9e6;text-shadow:none;word-wrap:normal;-moz-tab-size:2;tab-size:2;white-space:pre;white-space:pre-wrap}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2a2a2a}pre[class*=language-]{padding:15px;overflow:auto;border:1px solid #e1e1e8;border-radius:4px;position:relative}pre[class*=language-] code{display:block;white-space:pre}:not(pre)>code[class*=language-]{padding:.15em .2em .05em;border:.13em solid #7a6652;border-radius:.3em;box-shadow:inset 1px 1px .3em -.1em #000}.token.namespace{opacity:.7}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#6f705e}.token.boolean,.token.number,.token.operator{color:#a77afe}.language-css .token.string,.style .token.string,.token.attr-name,.token.entity,.token.string,.token.url{color:#e6d06c}.token.inserted,.token.selector{color:#a6e22d}.token.atrule,.token.attr-value,.token.deleted,.token.important,.token.keyword{color:#ef3b7d}.token.regex,.token.statement{color:#76d9e6}.token.placeholder,.token.variable{color:#fff}.token.bold,.token.important,.token.statement{font-weight:700}.token.punctuation{color:#bebec5}.token.entity{cursor:help}.token.italic{font-style:italic}code.language-markup{color:#f9f9f9}code.language-markup .token.tag{color:#ef3b7d}code.language-markup .token.attr-name{color:#a6e22d}code.language-markup .token.attr-value{color:#e6d06c}code.language-markup .token.script,code.language-markup .token.script .token.keyword,code.language-markup .token.style{color:#76d9e6}pre[class*=language-][data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight{position:absolute;right:0;left:0;padding:0;margin-top:1em;line-height:inherit;white-space:pre;pointer-events:none;background:hsla(0,0%,100%,.08)}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{position:absolute;top:.4em;left:.6em;min-width:1em;height:1em;padding:.2em .5em;font:700 65%/1 sans-serif;line-height:1em;color:#000;text-align:center;text-shadow:none;content:attr(data-start);background-color:hsla(0,0%,100%,.4);border-radius:999px;box-shadow:0 1px 1px hsla(0,0%,100%,.7)}pre[data-line] .line-highlight[data-end]:after{top:auto;bottom:.4em;content:attr(data-end)}:not(pre)>code[class*=language-],pre[class*=language-]{background:rgba(17,17,17,.8)}pre[class*=language-]{padding:1em 4vw;border-color:hsla(0,0%,94.1%,.8);border-right:0;border-left:0;border-radius:0}@media (min-width:768px){pre[class*=language-]{padding:1em 20px}}
.Container[data-v-07f291e2]{position:relative;display:block;width:100%;min-height:100vh}.PageTopHook[data-v-07f291e2]{position:absolute;top:0;left:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;display:block;width:1px;height:1px}
.Introduction[data-v-29ee655e]{z-index:1000000000;position:fixed;display:flex;justify-content:center;align-items:center;width:100%;height:100%;color:#111}.Introduction__background[data-v-29ee655e]{z-index:0;position:absolute;top:0;left:0;display:flex;justify-content:space-between;width:100%;height:100%}@media (min-width:768px){.Introduction__background[data-v-29ee655e]{flex-direction:column}}.Introduction__background-block[data-v-29ee655e]{display:block;width:100%;height:100%;background:#f0f0f0}.Introduction__background-block[data-v-29ee655e]:first-child{width:12%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:first-child{width:100%;height:12%}}.Introduction__background-block[data-v-29ee655e]:nth-child(2){width:12%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(2){width:100%;height:12%}}.Introduction__background-block[data-v-29ee655e]:nth-child(3){width:2%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(3){width:100%;height:2%}}.Introduction__background-block[data-v-29ee655e]:nth-child(4){width:1%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(4){width:100%;height:1%}}.Introduction__background-block[data-v-29ee655e]:nth-child(5){width:9%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(5){width:100%;height:9%}}.Introduction__background-block[data-v-29ee655e]:nth-child(6){width:22%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(6){width:100%;height:22%}}.Introduction__background-block[data-v-29ee655e]:nth-child(7){width:2%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(7){width:100%;height:2%}}.Introduction__background-block[data-v-29ee655e]:nth-child(8){width:8%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(8){width:100%;height:8%}}.Introduction__background-block[data-v-29ee655e]:nth-child(9){width:12%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(9){width:100%;height:12%}}.Introduction__background-block[data-v-29ee655e]:nth-child(10){width:4%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(10){width:100%;height:4%}}.Introduction__background-block[data-v-29ee655e]:nth-child(11){width:3%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(11){width:100%;height:3%}}.Introduction__background-block[data-v-29ee655e]:nth-child(12){width:15%}@media (min-width:768px){.Introduction__background-block[data-v-29ee655e]:nth-child(12){width:100%;height:15%}}.-loaded .Introduction__background-block[data-v-29ee655e]{animation:introduction-block-data-v-29ee655e .6s cubic-bezier(.19,1,.22,1)}@keyframes introduction-block-data-v-29ee655e{0%{background:#f0f0f0;opacity:1}50%{background:#111;opacity:1}to{background:#f0f0f0;opacity:0}}.Introduction__inner[data-v-29ee655e]{z-index:1;display:block;font-size:5.357vw;transition:opacity .4s}@media (min-width:768px){.Introduction__inner[data-v-29ee655e]{font-size:1.924vw}}@media (min-width:1040px){.Introduction__inner[data-v-29ee655e]{font-size:2rem}}.Introduction__inner[hidden][data-v-29ee655e]{opacity:0}.Introduction__title[data-v-29ee655e]{letter-spacing:.4em;width:100%;text-align:center}.Introduction__wave-parent[data-v-29ee655e]{position:relative;width:30vw;max-width:7em;margin:3vw auto auto;overflow:hidden}@media (min-width:768px){.Introduction__wave-parent[data-v-29ee655e]{margin-top:.8em}}.Introduction__wave[data-v-29ee655e]{display:block;width:100%;height:.5vw;padding:0;margin:1px 0 0;background:rgba(17,17,17,.8);animation:wave-animation-data-v-29ee655e 1.2s cubic-bezier(.77,0,.175,1) infinite;transform:translate3d(-100%,0,0)}@media (min-width:768px){.Introduction__wave[data-v-29ee655e]{height:2px}}.Introduction__wave[data-v-29ee655e]:first-child{animation-delay:60ms}.Introduction__wave[data-v-29ee655e]:nth-child(2){animation-delay:.12s}.Introduction__wave[data-v-29ee655e]:nth-child(3){animation-delay:.18s}.Introduction__wave[data-v-29ee655e]:nth-child(4){animation-delay:.24s}.Introduction__wave[data-v-29ee655e]:nth-child(5){animation-delay:.3s}@keyframes wave-animation-data-v-29ee655e{0%{transform:translate3d(-100%,0,0)}to{transform:translate3d(100%,0,0)}}.Introduction__message[data-v-29ee655e]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:block;font-size:.6em;background:#f0f0f0;white-space:nowrap}
.Background[data-v-2cb84ff6]{z-index:0;position:fixed;overflow:hidden}.Background[data-v-2cb84ff6],.Background[data-v-2cb84ff6]:after{top:0;left:0;display:block;width:100%;height:100%}.Background[data-v-2cb84ff6]:after{content:"";z-index:1;position:absolute;background:rgba(0,0,0,.8)}.Background__inner[data-v-2cb84ff6]{z-index:0;position:relative;display:block;width:100%}.Background__inner[data-v-2cb84ff6]:before{content:"";position:relative;display:block;width:100%;height:0%;padding-top:56.25%}.Background__carousel[data-v-2cb84ff6]{display:block;width:100%}.Background__block[data-v-2cb84ff6],.Background__carousel[data-v-2cb84ff6]{position:absolute;top:0;left:0;height:100%}.Background__block[data-v-2cb84ff6]{z-index:0;width:80%;background:rgba(255,0,0,.2);animation:background-block-move-data-v-2cb84ff6 20s ease-in-out infinite alternate}.Background__block[data-v-2cb84ff6]:last-of-type{background:rgba(0,255,0,.2);animation-delay:8s}@keyframes background-block-move-data-v-2cb84ff6{0%{transform:translate3d(-30%,0,0)}to{transform:translate3d(30%,0,0)}}</style>
  </head>
  <body data-n-head="">
    <div data-server-rendered="true" id="__nuxt"><div id="__layout"><div class="Container" data-v-07f291e2><section class="Introduction" data-v-29ee655e data-v-07f291e2><div role="presentation" class="Introduction__background" data-v-29ee655e><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span><span class="Introduction__background-block" data-v-29ee655e></span></div> <div class="Introduction__inner" data-v-29ee655e><p class="Introduction__title" data-v-29ee655e>kaave.github.io</p> <div class="Introduction__wave-parent" data-v-29ee655e><span role="presentation" class="Introduction__wave" data-v-29ee655e></span> <span role="presentation" class="Introduction__wave" data-v-29ee655e></span> <span role="presentation" class="Introduction__wave" data-v-29ee655e></span> <span role="presentation" class="Introduction__wave" data-v-29ee655e></span> <span role="presentation" class="Introduction__wave" data-v-29ee655e></span> <p class="Introduction__message" data-v-29ee655e>now initializing.</p></div></div></section> <span role="presentation" class="PageTopHook" data-v-07f291e2></span> <section role="presentation" class="Background" data-v-2cb84ff6 data-v-07f291e2><div class="Background__inner" style="width:0px;height:0px;" data-v-2cb84ff6><canvas class="DistortionCarousel Background__carousel" data-v-2e72c0bd data-v-2cb84ff6></canvas></div> <div class="Background__block" data-v-2cb84ff6></div> <div class="Background__block" data-v-2cb84ff6></div></section> <!----></div></div></div><script>window.__NUXT__=function(n,e,a,t,s,p,l,i,o,r,c,h,m,u,g,d,b,y,f,j,w,S,k,v,O,x,C,F,L,N,q,P,G,T,_,R,E){return h.status=a,h.id=m,h.publish=new Date(15289344e5),h.subject=u,h.entry=g,h.thumbnail={url:f,mimeType:j,fileName:R,width:560,height:280,size:c,__typename:e},h.__typename=n,h.entryHtml='<h2>Pixi.jsでGlitch</h2>\n<p>別にメディアアートまでいかなくてもいいけどTOPにばばばんと表示されてる画像や背景に表示している画像にエフェクトをかけたりしてみたいなぁというモチベが一年くらい前からくすぶってたんですが、ついに大きな&quot;炎&quot;になったので取り組んでみました。</p>\n<p>まずはライブラリの選択からじゃーってことでPixi.jsかThree.jsのどっちかをかじろうと考えた結果、Pixi.jsをやることに。</p>\n<p>で、色々ぐぐってたら<a href="https://github.com/ktingvoar/PixiGlitch">良さげなコード</a>を発見したんですが結構長いこと更新されておらず、最新のバージョンだと動かなかった&amp;サンプルがイマイチだったので自分でそのへんを更新してみました。</p>\n<h3>制作物</h3>\n<ul>\n<li><a href="https://2018-09-08-pixijs.netlify.com/08.html">Demo</a></li>\n<li><a href="https://github.com/kaave/playground-pixi-js">Repository</a>\n<ul>\n<li>面倒くさくて検証用の環境使ってそのまま書いちゃってるのでそのうち移転するかも。</li>\n</ul>\n</li>\n</ul>\n<h3>Demoについて</h3>\n<h4>操作方法</h4>\n<ul>\n<li>左上のプルダウンからエフェクトかける対象を選択できます。プリセット画像、デバイスのカメラ、アップロード画像のいずれかとなります。\n<ul>\n<li>アップロード画像はgif, jpg, pngに対応しています。</li>\n<li>アップロードフォームを隠してプルダウンの選択で発火するようにしたかったんですがセキュリティの関係でアウツ。なんとかする方法ってあるんですかね？</li>\n</ul>\n</li>\n<li>右のフォームでエフェクトを選択します。\n<ul>\n<li>色系はON/OFFしかないです。</li>\n<li>その他は色々パラメータがあるんでついでにランダムもつけました。乱数のアルゴリズムは単なる<code>Math.random</code>なので微妙です。</li>\n</ul>\n</li>\n<li>キーボードでエフェクトのON/OFF、ランダムのON/OFFを設定できます。\n<ul>\n<li>フォームの名称右にカッコでくくられた一文字があると思いますが、そのキーを押すとON/OFFが切り替わります。</li>\n<li><code>shift</code>を押しながらでランダムのON/OFFが切り替わります。</li>\n<li><code>enter</code>ですべてのエフェクトがOFFになります。</li>\n<li><code>shift</code>を押しながら<code>enter</code>ですべてのランダムがOFFになります。</li>\n<li>とりあえず<code>a</code>を叩いて<code>shift+a</code>を叩き、ほかをいじってくのがおもしろいです！ソースはもちろんカメラで！</li>\n</ul>\n</li>\n</ul>\n<h4>Netlify</h4>\n<p>GitHub Pagesでもよかったんですが面倒くさかったのでNetlifyに。相も変わらず楽すぎます！もうちょっと回線がぶっとくなるといいなぁ。</p>\n<h3>コードとかそのへん</h3>\n<h4>webpackさまさま</h4>\n<p>シェーダーのコードを<code>.frag</code>で別ファイルに構築し、<code>raw-loader</code>で読み込む環境を作りました。これが非常にいい感じ。</p>\n<h4>TypeScriptでPixi.js</h4>\n<p>どうも型ファイルが色々と変でいくつか<code>any</code>でごまかしました。あんまいいことじゃないけど。だって型ファイルに手ぇ入れてプルリク出すほどPixi.jsわかんないんで。</p>\n<h4>シェーダーわからん</h4>\n<p>これは&quot;特殊技能&quot;でWeb屋にこれを求めたらいかんなという印象ですがいかがなもんでしょう…。</p>\n<h4>Webアクセシビリティに準拠したPixi.jsの使い方</h4>\n<p>今回は画像をゴリゴリやってるだけなので<code>role=&quot;presentation&quot;</code>つけときゃとりあえずいいかなって内容なんですが、例えばキャッチコピーをばんとテキストで入れてそいつをごりごりいじったときにどうすんのがいいんでしょう？</p>\n<p><code>canvas</code>に<code>aria-label</code>とか？そのうち調べよう・・・。</p>\n<h3>今後</h3>\n<h4>斜めに画像をちょん切りたい</h4>\n<p>あんまグリッチって感じじゃないけどどうやってやるのかまだ調べてないんですけど画像を斜めにスライスして個別に移動とかやりたいんですよね。</p>\n<h4>DOMではできないテキスト表現</h4>\n<p>小さなテキストを死ぬほど描画していろいろやりたい。ファミコンをどついたような感じというか。DOMでやるより軽そうだし…。</p>\n<h4>シェーダーはよくわかんない</h4>\n<p>上でも書いたけどわかんないのでネットで拾ってきたのをちょっとカスタムできるくらいで当面はいいかな。</p>\n<h4>画面まるごと</h4>\n<p><a href="https://html2canvas.hertzen.com/">html2canvas</a>でうまいこといけそうなんだけど、IEが立ちはだかるのであった。IEいらん案件がでてきたらやってみたいね。</p>\n',{layout:"default",data:[{entry:h}],error:i,state:{entered:!1,entries:{entries:[{status:a,id:d,publish:new Date(15382656e5),subject:b,entry:y,thumbnail:{url:E,mimeType:p,fileName:w,width:1440,height:789,size:64041,__typename:e},__typename:n,entryHtml:'<h2>WebGLやるぞ！</h2>\n<p>Web開発歴10何年にしてついにWebGL入門しました。<a href="https://wgld.org">wgld.org</a>を読みながらひぃひぃ言ってます。今はまだ三角形がいっぱい出たところですがここまでが凄い大変でしたね…。</p>\n<p>で、WebGLっちゅーとシェーダー書くわけですが、そのための設定をVSCodeでいろいろやったのでまとめました。僕はなんか新しいことやるときはきちっと環境を作ってからじゃないとやる気が出ないタイプなんですよね。</p>\n<ul>\n<li>Syntax Highlight</li>\n<li>Linter</li>\n<li>Formatter</li>\n</ul>\n<p>の3点でお届けします。</p>\n<h3>Syntax Highlight</h3>\n<p><a href="https://marketplace.visualstudio.com/items?itemName=slevesque.shader">Shader languages support for VS Code</a>を入れました。</p>\n<p>これは入れるだけでオシマイ。とくにどうこうありませぬ。自分の環境だとこれだけで<code>.glsl</code>, <code>.frag</code>, <code>.vert</code>のいずれの形式もハイライトされました。</p>\n<h3>Linter</h3>\n<p><code>glslangValidator</code>というツールをVSCodeの拡張経由でかける、という形になります。というわけでまずはOS側に先述のツールを入れ込まないといけないんですが、これは<a href="https://www.khronos.org/opengles/sdk/tools/Reference-Compiler/">OpenGL / OpenGL ES Reference Compiler</a>のなかに含まれておるんでこいつを入れます。</p>\n<h4>OS</h4>\n<p>公式サイトから落としてガチャガチャやってもいいんですが、homebrewセットアップしてあれば以下のコマンドで一発です。</p>\n<pre class="language-bash"><code class="language-bash">brew <span class="token function">install</span> glslang\n<span class="token comment"># ちゃんと入ったか確認</span>\nglslangValidator --version\n</code></pre>\n<h4>VSCode</h4>\n<p><a href="https://marketplace.visualstudio.com/items?itemName=CADENAS.vscode-glsllint">GLSL Lint</a>を入れます。</p>\n<p>入れたら<code>glslangValidator</code>のパスを通します。設定ファイルの適当なところに以下の1行を追加してください。</p>\n<pre class="language-jsonc"><code class="language-jsonc">// OS側でパスが通ってるのでこれだけでOKっぽい。\n&quot;glsllint.glslangValidatorPath&quot;: &quot;glslangValidator&quot;\n</code></pre>\n<p>こんだけでOKでした。適当なコード書くとその場で怒られることを確認しましょう。</p>\n<p>ちなみに細かい設定に関しては調べてないです。なぜかというと僕がまだシェーダーの知識ほぼゼロなので何がいいのか悪いのかまったくわからないからです。いつか追記するかも。</p>\n<h3>Fotmatter</h3>\n<p><code>Clang-Format</code>というツールを使います。これはhomebrew経由でOSに入れるかnpm経由でワークスペースに入れるかの2択ですが、ローカルに入れて困らんものはローカルに入れましょう。</p>\n<h4>npm</h4>\n<p>ふつうに入れればOKです。</p>\n<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i -D clang-format\n<span class="token comment"># or</span>\n<span class="token function">yarn</span> <span class="token function">add</span> -D clang-format\n</code></pre>\n<h4>VSCode</h4>\n<p><a href="https://marketplace.visualstudio.com/items?itemName=xaver.clang-format">Clang-Format</a>を入れましょう。</p>\n<p>入れたらパスを通す必要があります。また、保存時に整形する設定も追加しましょう。以下参照。</p>\n<pre class="language-jsonc"><code class="language-jsonc">// ワークスペースのclang-formatを利用する\n&quot;clang-format.executable&quot;: &quot;${workspaceRoot}/node_modules/.bin/clang-format&quot;,\n// glsl形式のファイルを保存する際に整形\n&quot;[glsl]&quot;: {\n  &quot;editor.formatOnSave&quot;: true\n},\n</code></pre>\n<p>で、このツールですけどJS(TS)にも対応しており整形してくれるんですが、Prettierとバッティングして保存のたびにいずれかのツールが自分の流儀で整形して毎回ちがうコードになるというヂゴク。ので、設定ファイルを追加してJS(TS)はスルーするようにします。</p>\n<pre class="language-yaml"><code class="language-yaml"><span class="token comment"># .clang-format</span>\n\n<span class="token comment"># 基本的な設定をGoogle準拠にする その他いろいろあるけど略</span>\n<span class="token key atrule">BasedOnStyle</span><span class="token punctuation">:</span> Google\n<span class="token comment"># 1行あたりのMax文字数を120文字とする</span>\n<span class="token key atrule">ColumnLimit</span><span class="token punctuation">:</span> <span class="token number">120</span>\n<span class="token comment"># タブ幅を4とする</span>\n<span class="token key atrule">TabWidth</span><span class="token punctuation">:</span> <span class="token number">4</span>\n<span class="token punctuation">---</span>\n<span class="token comment"># 以下、JavaScript/TypeScriptの設定となる。</span>\n<span class="token key atrule">Language</span><span class="token punctuation">:</span> JavaScript\n<span class="token comment"># Clang-Formatを無効化する</span>\n<span class="token key atrule">DisableFormat</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>\n</code></pre>\n<p>これでOK。</p>\n<p>ちなみにこの拡張ですが、普段はDisableにしておきWebGLが必要なプロジェクトのみEnableにするのがいいと思います。というのもClang-Formatがないぞエラーがバンバン出るんですよ。当たり前ですけど。今回の仕事だと使わんちゅうに、みたいな。</p>\n<h3>以上</h3>\n<p>あとは書くだけです。</p>\n<h3>ちなみに</h3>\n<p>僕は<a href="https://wgld.org">wgld.org</a>の環境設定とは違い、TypeScript + webpackでやってます。<a href="https://github.com/doxas/minMatrix.js">minMatrix.js</a>も<a href="https://github.com/kaave/playground-webgl/blob/b93adfe75f06deb8cc03fbb5c8b9b09af5b92d0c/src/scripts/modules/minMatrix.ts">自分で書き直してTypeScript仕様にしてます</a>。新しいことやるときはやっぱ型あったほうが格段に楽ですね…。</p>\n'},{status:a,id:O,publish:new Date(15376608e5),subject:x,entry:C,thumbnail:{url:F,mimeType:p,fileName:L,width:1262,height:751,size:20538,__typename:e},__typename:n,entryHtml:'<h2>いじりました</h2>\n<p>えー、またサイトのシステムをごっそり入れ替えました。今度はVuePressです。いじったところのメモがてら、エントリー投下です。<br>\nちなみにいじった理由は今までの自前Reactバージョンのものが今見ると微妙なところが多すぎたからです。外ヅラだけはできてるけどmetaまわりとかメチャクチャじゃないかっていう。でそこ手で直すのもめんどくさいしさーーっていう。</p>\n<h3>テーマ</h3>\n<p>全部自作。互換性とか知るかー！機能面では削られちゃいますけどその気になったら自作すればよろしい。</p>\n<p>あとデフォルトだとstylusだったけどPostCSSに差し替えました。stylus知らないのです。PostCSSへの差し替えはとくになにも考えずにいつもどおりで問題なかったです。使うpluginだけ<code>config.js</code>に書けば大丈夫。Nuxtとおなじじゃないかな、たしか。</p>\n<h3>feed</h3>\n<p>VuePressはその名前とは裏腹にカリカリにいじってやらないとブログっぽくなりません。例えばfeedを出力してくれないとか。というわけでこれは自前でなんとかします。</p>\n<p><a href="https://github.com/kaave/github-page-src/blob/7dda0424eadb7ee971a2cc583c44c678b916cc4b/src/.vuepress/enhanceApp.js#L10-L33">具体的にはこの辺のコード</a>ですね。<code>enhanceApp.js</code>でなんとかするという。RSS生成そのものについてはnpmの<a href="https://www.npmjs.com/package/feed">feed</a>モジュールに頼りました。ただこの書き方だと経路の数だけ毎回出力されるので無駄なことこの上なし、うーんなんとかしたいところ…。ルートファイルを処理しているときにだけさばいてやりゃ良さそうなんじゃないって思ったんですが、その状況を判別する方法がわかんなかったです。見える変数片っ端からダンプしてみたけどどこにも落ちてなくてしょんぼり。</p>\n<h3>sitemap</h3>\n<p>feedと同じく出力してくれません。同じ要領で処理します。こっちは<a href="https://www.npmjs.com/package/sitemap">sitemap</a>モジュールでなんとかしました。って言ってますがちゃんとしたsitemapが出てるかどうか実はよくわかってないんですよね。URLいっぱい入ったファイル出たぜやったー👏までしか確認してないです〜〜〜。</p>\n<h3>ルーティング</h3>\n<p>Markdownファイルの配置がそのままルーティングになるので、Markdownの出力を使わずVueのみで完結するページもMarkdownを置いてやらないとWARNINGが出まくったりとおかしげなことになります。非常にカッコ悪い対応なので嫌なんですが、しゃあない…とおもう。たぶん。</p>\n<h3>Google Tag Manager</h3>\n<p>なんか非対応っぽい。しゃーないからGAで我慢。GAはオプションに書くだけ。Nuxtとおなじっすね。</p>\n<h3>相変わらずCircleCI + GitHub Pagesで運用</h3>\n<p>独自ドメイン + Netlifyでの運用も頭をよぎりましたが、<code>kaave.github.io</code>よりいけてるドメインを思いつかなかったんでやめました。<code>kaavetek.net</code>にしようかなと思ったこともあったんですがなんかややこしいからやめよって…。ちなみに、Hardtekのパクリ。</p>\n<p>で、今回大変だったのがCircleCIのバージョンをv2にすることでした。何しろ片手間で使ってたからこれはしんどい。トライアンドエラーしまくりで強引に進めました。もう今回はこれでいいです。</p>\n<h2>今のところ</h2>\n<p>とりあえず今出力されているファイルにはだいたいマンゾクしております。MDから出力されたHTMLに関してはassetsをインライン化したいんですけど、やれてないとこだとそれくらいですね。今の所やりかたわかんなくてやってないです。</p>\n<p>プロジェクト構成についてはもうちょっとうまい感じにできないかなーと思ってますが、まぁ自分のサイトだからいっかーという気持ちです。</p>\n<p>サイトデザインについては適当なんでどうもこうもないです。勉強がてら遷移アニメつけよっかなーと思ってますがまぁそれくらい。</p>\n'},h,{status:a,id:G,publish:new Date(14989536e5),subject:T,entry:_,thumbnail:i,__typename:n,entryHtml:'<h2>github.io作り直しました</h2>\n<p>もう全部いじりました。つってもまぁ基本的な部分はそのままですが。</p>\n<p>これを機に思い立ったときにだけ更新するようにします。</p>\n<h3>できたとこ</h3>\n<h4>モバイルファースト</h4>\n<p>これ結構考えものだなぁと思った。</p>\n<p>少なくともPC版のプロトタイプ(大まかなレイアウト)までやってからスマホ側の構築やんないと、やべぇここにコンテナ的なdivがいるわ、ということがわりと普通に発生するなと。</p>\n<p>幸いデザインがあってないようなものだったのでなんとかなりました。</p>\n<h4>RSS(atom)対応</h4>\n<p><a href="https://www.npmjs.com/package/feed">feed</a>という素晴らしいモジュールがすべて解決してくれました。</p>\n<h4>グリッドレイアウト</h4>\n<p>サイト全体を単純に区切るだけなら全然悪くない。問題はモバイルの対応がほんとつい最近だったってことかな。</p>\n<h4>アニメーション連発</h4>\n<p>やってみたらできたってやつです。</p>\n<h4>react-routerで構築</h4>\n<p>これがなかなかめんどくさかった。</p>\n<p>URLから目的のJSONをfetchしてきて表示する、ということをやっているんですが、URLにマッチしたcomponentの中でパラメータを取得してそれを親に返してうんぬんかんぬんしてます。</p>\n<p>微妙、の一言。まぁreact-routerのおかげで記事それぞれにURL発行できたんですが。</p>\n<h4>highlight.js対応</h4>\n<p>前もやってたっけ？もはや記憶にないしコードもふっ飛ばした。</p>\n<h3>できなかったとこ</h3>\n<h4>gulpタスク内でSSR</h4>\n<p>最初は楽勝だろと思ってたんですが、よく考えたらJSXをgulpから読み込まないといけないからクソめんどくない？って気づいて一気に嫌になりました。</p>\n<p>今は記事毎にrootと同じhtmlを作成して404にならないようにして、あとは遷移先でreact-routerがよしなにやってくれるのに任せてます。</p>\n<p>gulp-babelとか使えばできそうではあります。</p>\n<h2>日記</h2>\n<p>長久手のイオンに行ってきました。</p>\n<p>インナーバッグがほしいなーってのと、自転車に乗っておきたいなーっていう理由で。</p>\n<p>イオンっていうと吹き抜けが凄いイメージだったけど、そうじゃなかったので意外だった。あと、混みすぎ。</p>\n'}]},lts:{lts:[]}},serverRendered:!0,apollo:{defaultClient:Object.create(null,{"Entry:cjvj75vxlc8wc0830ob87rceq":{writable:!0,enumerable:!0,value:{status:a,id:d,publish:"2018-09-30T00:00:00.000Z",subject:b,entry:y,thumbnail:{type:t,generated:!0,id:"$Entry:cjvj75vxlc8wc0830ob87rceq.thumbnail",typename:e},__typename:n}},"$Entry:cjvj75vxlc8wc0830ob87rceq.thumbnail":{writable:!0,enumerable:!0,value:{url:E,mimeType:p,fileName:w,width:1440,height:789,size:64041,__typename:e}},"Entry:cjvj73y5tc8qq0830ghw3ujw1":{writable:!0,enumerable:!0,value:{status:a,id:O,publish:"2018-09-23T00:00:00.000Z",subject:x,entry:C,thumbnail:{type:t,generated:!0,id:"$Entry:cjvj73y5tc8qq0830ghw3ujw1.thumbnail",typename:e},__typename:n}},"$Entry:cjvj73y5tc8qq0830ghw3ujw1.thumbnail":{writable:!0,enumerable:!0,value:{url:F,mimeType:p,fileName:L,width:1262,height:751,size:20538,__typename:e}},"Entry:cjvj6z0qxc8dg08303464m9zy":{writable:!0,enumerable:!0,value:{status:a,id:m,publish:"2018-06-14T00:00:00.000Z",subject:u,entry:g,thumbnail:{type:t,generated:!0,id:"$Entry:cjvj6z0qxc8dg08303464m9zy.thumbnail",typename:e},__typename:n}},"$Entry:cjvj6z0qxc8dg08303464m9zy.thumbnail":{writable:!0,enumerable:!0,value:{url:f,mimeType:j,fileName:R,width:560,height:280,size:c,__typename:e}},"Entry:cjvj6teikc7y20830gctbmcr4":{writable:!0,enumerable:!0,value:{status:a,id:G,publish:"2017-07-02T00:00:00.000Z",subject:T,entry:_,thumbnail:i,__typename:n}},ROOT_QUERY:{writable:!0,enumerable:!0,value:{'entries({"orderBy":"publish_DESC"})':[{type:t,generated:!1,id:"Entry:cjvj75vxlc8wc0830ob87rceq",typename:n},{type:t,generated:!1,id:"Entry:cjvj73y5tc8qq0830ghw3ujw1",typename:n},{type:t,generated:!1,id:"Entry:cjvj6z0qxc8dg08303464m9zy",typename:n},{type:t,generated:!1,id:"Entry:cjvj6teikc7y20830gctbmcr4",typename:n}]}}})}}}("Entry","Asset","PUBLISHED","id",0,"image/png",0,null,0,0,540351,{},"cjvj6z0qxc8dg08303464m9zy","Pixi.jsでGlitch",'## Pixi.jsでGlitch\n\n別にメディアアートまでいかなくてもいいけどTOPにばばばんと表示されてる画像や背景に表示している画像にエフェクトをかけたりしてみたいなぁというモチベが一年くらい前からくすぶってたんですが、ついに大きな"炎"になったので取り組んでみました。\n\nまずはライブラリの選択からじゃーってことでPixi.jsかThree.jsのどっちかをかじろうと考えた結果、Pixi.jsをやることに。\n\nで、色々ぐぐってたら[良さげなコード](https://github.com/ktingvoar/PixiGlitch)を発見したんですが結構長いこと更新されておらず、最新のバージョンだと動かなかった&サンプルがイマイチだったので自分でそのへんを更新してみました。\n\n### 制作物\n\n- [Demo](https://2018-09-08-pixijs.netlify.com/08.html)\n- [Repository](https://github.com/kaave/playground-pixi-js)\n    - 面倒くさくて検証用の環境使ってそのまま書いちゃってるのでそのうち移転するかも。\n\n### Demoについて\n\n#### 操作方法\n\n- 左上のプルダウンからエフェクトかける対象を選択できます。プリセット画像、デバイスのカメラ、アップロード画像のいずれかとなります。\n    - アップロード画像はgif, jpg, pngに対応しています。\n    - アップロードフォームを隠してプルダウンの選択で発火するようにしたかったんですがセキュリティの関係でアウツ。なんとかする方法ってあるんですかね？\n- 右のフォームでエフェクトを選択します。\n    - 色系はON/OFFしかないです。\n    - その他は色々パラメータがあるんでついでにランダムもつけました。乱数のアルゴリズムは単なる`Math.random`なので微妙です。\n- キーボードでエフェクトのON/OFF、ランダムのON/OFFを設定できます。\n    - フォームの名称右にカッコでくくられた一文字があると思いますが、そのキーを押すとON/OFFが切り替わります。\n    - `shift`を押しながらでランダムのON/OFFが切り替わります。\n    - `enter`ですべてのエフェクトがOFFになります。\n    - `shift`を押しながら`enter`ですべてのランダムがOFFになります。\n    - とりあえず`a`を叩いて`shift+a`を叩き、ほかをいじってくのがおもしろいです！ソースはもちろんカメラで！\n\n#### Netlify\n\nGitHub Pagesでもよかったんですが面倒くさかったのでNetlifyに。相も変わらず楽すぎます！もうちょっと回線がぶっとくなるといいなぁ。\n\n### コードとかそのへん\n\n#### webpackさまさま\n\nシェーダーのコードを`.frag`で別ファイルに構築し、`raw-loader`で読み込む環境を作りました。これが非常にいい感じ。\n\n#### TypeScriptでPixi.js\n\nどうも型ファイルが色々と変でいくつか`any`でごまかしました。あんまいいことじゃないけど。だって型ファイルに手ぇ入れてプルリク出すほどPixi.jsわかんないんで。\n\n#### シェーダーわからん\n\nこれは"特殊技能"でWeb屋にこれを求めたらいかんなという印象ですがいかがなもんでしょう…。\n\n#### Webアクセシビリティに準拠したPixi.jsの使い方\n\n今回は画像をゴリゴリやってるだけなので`role="presentation"`つけときゃとりあえずいいかなって内容なんですが、例えばキャッチコピーをばんとテキストで入れてそいつをごりごりいじったときにどうすんのがいいんでしょう？\n\n`canvas`に`aria-label`とか？そのうち調べよう・・・。\n\n### 今後\n\n#### 斜めに画像をちょん切りたい\n\nあんまグリッチって感じじゃないけどどうやってやるのかまだ調べてないんですけど画像を斜めにスライスして個別に移動とかやりたいんですよね。\n\n#### DOMではできないテキスト表現\n\n小さなテキストを死ぬほど描画していろいろやりたい。ファミコンをどついたような感じというか。DOMでやるより軽そうだし…。\n\n#### シェーダーはよくわかんない\n\n上でも書いたけどわかんないのでネットで拾ってきたのをちょっとカスタムできるくらいで当面はいいかな。\n\n#### 画面まるごと\n\n[html2canvas](https://html2canvas.hertzen.com/)でうまいこといけそうなんだけど、IEが立ちはだかるのであった。IEいらん案件がでてきたらやってみたいね。\n',"cjvj75vxlc8wc0830ob87rceq","WebGL入門のためにVScodeをガッチリ設定",'## WebGLやるぞ！\n\nWeb開発歴10何年にしてついにWebGL入門しました。[wgld.org](https://wgld.org)を読みながらひぃひぃ言ってます。今はまだ三角形がいっぱい出たところですがここまでが凄い大変でしたね…。\n\nで、WebGLっちゅーとシェーダー書くわけですが、そのための設定をVSCodeでいろいろやったのでまとめました。僕はなんか新しいことやるときはきちっと環境を作ってからじゃないとやる気が出ないタイプなんですよね。\n\n- Syntax Highlight\n- Linter\n- Formatter\n\nの3点でお届けします。\n\n### Syntax Highlight\n\n[Shader languages support for VS Code](https://marketplace.visualstudio.com/items?itemName=slevesque.shader)を入れました。\n\nこれは入れるだけでオシマイ。とくにどうこうありませぬ。自分の環境だとこれだけで`.glsl`, `.frag`, `.vert`のいずれの形式もハイライトされました。\n\n### Linter\n\n`glslangValidator`というツールをVSCodeの拡張経由でかける、という形になります。というわけでまずはOS側に先述のツールを入れ込まないといけないんですが、これは[OpenGL / OpenGL ES Reference Compiler](https://www.khronos.org/opengles/sdk/tools/Reference-Compiler/)のなかに含まれておるんでこいつを入れます。\n\n#### OS\n\n公式サイトから落としてガチャガチャやってもいいんですが、homebrewセットアップしてあれば以下のコマンドで一発です。\n\n```bash\nbrew install glslang\n# ちゃんと入ったか確認\nglslangValidator --version\n```\n\n#### VSCode\n\n[GLSL Lint](https://marketplace.visualstudio.com/items?itemName=CADENAS.vscode-glsllint)を入れます。\n\n入れたら`glslangValidator`のパスを通します。設定ファイルの適当なところに以下の1行を追加してください。\n\n```jsonc\n// OS側でパスが通ってるのでこれだけでOKっぽい。\n"glsllint.glslangValidatorPath": "glslangValidator"\n```\n\nこんだけでOKでした。適当なコード書くとその場で怒られることを確認しましょう。\n\nちなみに細かい設定に関しては調べてないです。なぜかというと僕がまだシェーダーの知識ほぼゼロなので何がいいのか悪いのかまったくわからないからです。いつか追記するかも。\n\n### Fotmatter\n\n`Clang-Format`というツールを使います。これはhomebrew経由でOSに入れるかnpm経由でワークスペースに入れるかの2択ですが、ローカルに入れて困らんものはローカルに入れましょう。\n\n#### npm\n\nふつうに入れればOKです。\n\n```bash\nnpm i -D clang-format\n# or\nyarn add -D clang-format\n```\n\n#### VSCode\n\n[Clang-Format](https://marketplace.visualstudio.com/items?itemName=xaver.clang-format)を入れましょう。\n\n入れたらパスを通す必要があります。また、保存時に整形する設定も追加しましょう。以下参照。\n\n```jsonc\n// ワークスペースのclang-formatを利用する\n"clang-format.executable": "${workspaceRoot}/node_modules/.bin/clang-format",\n// glsl形式のファイルを保存する際に整形\n"[glsl]": {\n  "editor.formatOnSave": true\n},\n```\n\nで、このツールですけどJS(TS)にも対応しており整形してくれるんですが、Prettierとバッティングして保存のたびにいずれかのツールが自分の流儀で整形して毎回ちがうコードになるというヂゴク。ので、設定ファイルを追加してJS(TS)はスルーするようにします。\n\n```yaml\n# .clang-format\n\n# 基本的な設定をGoogle準拠にする その他いろいろあるけど略\nBasedOnStyle: Google\n# 1行あたりのMax文字数を120文字とする\nColumnLimit: 120\n# タブ幅を4とする\nTabWidth: 4\n---\n# 以下、JavaScript/TypeScriptの設定となる。\nLanguage: JavaScript\n# Clang-Formatを無効化する\nDisableFormat: true\n```\n\nこれでOK。\n\nちなみにこの拡張ですが、普段はDisableにしておきWebGLが必要なプロジェクトのみEnableにするのがいいと思います。というのもClang-Formatがないぞエラーがバンバン出るんですよ。当たり前ですけど。今回の仕事だと使わんちゅうに、みたいな。\n\n### 以上\n\nあとは書くだけです。\n\n### ちなみに\n\n僕は[wgld.org](https://wgld.org)の環境設定とは違い、TypeScript + webpackでやってます。[minMatrix.js](https://github.com/doxas/minMatrix.js)も[自分で書き直してTypeScript仕様にしてます](https://github.com/kaave/playground-webgl/blob/b93adfe75f06deb8cc03fbb5c8b9b09af5b92d0c/src/scripts/modules/minMatrix.ts)。新しいことやるときはやっぱ型あったほうが格段に楽ですね…。',"https://media.graphcms.com/WE1rMMpaRPi5KEPD2nrI","image/gif","20180930-thumbnail.png",0,0,0,"cjvj73y5tc8qq0830ghw3ujw1","サイトのシステム入れ替え 2018年ver","## いじりました\n\nえー、またサイトのシステムをごっそり入れ替えました。今度はVuePressです。いじったところのメモがてら、エントリー投下です。\nちなみにいじった理由は今までの自前Reactバージョンのものが今見ると微妙なところが多すぎたからです。外ヅラだけはできてるけどmetaまわりとかメチャクチャじゃないかっていう。でそこ手で直すのもめんどくさいしさーーっていう。\n\n### テーマ\n\n全部自作。互換性とか知るかー！機能面では削られちゃいますけどその気になったら自作すればよろしい。\n\nあとデフォルトだとstylusだったけどPostCSSに差し替えました。stylus知らないのです。PostCSSへの差し替えはとくになにも考えずにいつもどおりで問題なかったです。使うpluginだけ`config.js`に書けば大丈夫。Nuxtとおなじじゃないかな、たしか。\n\n### feed\n\nVuePressはその名前とは裏腹にカリカリにいじってやらないとブログっぽくなりません。例えばfeedを出力してくれないとか。というわけでこれは自前でなんとかします。\n\n[具体的にはこの辺のコード](https://github.com/kaave/github-page-src/blob/7dda0424eadb7ee971a2cc583c44c678b916cc4b/src/.vuepress/enhanceApp.js#L10-L33)ですね。`enhanceApp.js`でなんとかするという。RSS生成そのものについてはnpmの[feed](https://www.npmjs.com/package/feed)モジュールに頼りました。ただこの書き方だと経路の数だけ毎回出力されるので無駄なことこの上なし、うーんなんとかしたいところ…。ルートファイルを処理しているときにだけさばいてやりゃ良さそうなんじゃないって思ったんですが、その状況を判別する方法がわかんなかったです。見える変数片っ端からダンプしてみたけどどこにも落ちてなくてしょんぼり。\n\n### sitemap\n\nfeedと同じく出力してくれません。同じ要領で処理します。こっちは[sitemap](https://www.npmjs.com/package/sitemap)モジュールでなんとかしました。って言ってますがちゃんとしたsitemapが出てるかどうか実はよくわかってないんですよね。URLいっぱい入ったファイル出たぜやったー👏までしか確認してないです〜〜〜。\n\n### ルーティング\n\nMarkdownファイルの配置がそのままルーティングになるので、Markdownの出力を使わずVueのみで完結するページもMarkdownを置いてやらないとWARNINGが出まくったりとおかしげなことになります。非常にカッコ悪い対応なので嫌なんですが、しゃあない…とおもう。たぶん。\n\n### Google Tag Manager\n\nなんか非対応っぽい。しゃーないからGAで我慢。GAはオプションに書くだけ。Nuxtとおなじっすね。\n\n### 相変わらずCircleCI + GitHub Pagesで運用\n\n独自ドメイン + Netlifyでの運用も頭をよぎりましたが、`kaave.github.io`よりいけてるドメインを思いつかなかったんでやめました。`kaavetek.net`にしようかなと思ったこともあったんですがなんかややこしいからやめよって…。ちなみに、Hardtekのパクリ。\n\nで、今回大変だったのがCircleCIのバージョンをv2にすることでした。何しろ片手間で使ってたからこれはしんどい。トライアンドエラーしまくりで強引に進めました。もう今回はこれでいいです。\n\n## 今のところ\n\nとりあえず今出力されているファイルにはだいたいマンゾクしております。MDから出力されたHTMLに関してはassetsをインライン化したいんですけど、やれてないとこだとそれくらいですね。今の所やりかたわかんなくてやってないです。\n\nプロジェクト構成についてはもうちょっとうまい感じにできないかなーと思ってますが、まぁ自分のサイトだからいっかーという気持ちです。\n\nサイトデザインについては適当なんでどうもこうもないです。勉強がてら遷移アニメつけよっかなーと思ってますがまぁそれくらい。\n","https://media.graphcms.com/oMWu7yy2Syi0a0DC3m1W","20180923-thumbnail.png",0,0,0,"cjvj6teikc7y20830gctbmcr4","サイトまるごと作り直しました","## github.io作り直しました\n\nもう全部いじりました。つってもまぁ基本的な部分はそのままですが。\n\nこれを機に思い立ったときにだけ更新するようにします。\n\n### できたとこ\n\n#### モバイルファースト\n\nこれ結構考えものだなぁと思った。\n\n少なくともPC版のプロトタイプ(大まかなレイアウト)までやってからスマホ側の構築やんないと、やべぇここにコンテナ的なdivがいるわ、ということがわりと普通に発生するなと。\n\n幸いデザインがあってないようなものだったのでなんとかなりました。\n\n#### RSS(atom)対応\n\n[feed](https://www.npmjs.com/package/feed)という素晴らしいモジュールがすべて解決してくれました。\n\n#### グリッドレイアウト\n\nサイト全体を単純に区切るだけなら全然悪くない。問題はモバイルの対応がほんとつい最近だったってことかな。\n\n#### アニメーション連発\n\nやってみたらできたってやつです。\n\n#### react-routerで構築\n\nこれがなかなかめんどくさかった。\n\nURLから目的のJSONをfetchしてきて表示する、ということをやっているんですが、URLにマッチしたcomponentの中でパラメータを取得してそれを親に返してうんぬんかんぬんしてます。\n\n微妙、の一言。まぁreact-routerのおかげで記事それぞれにURL発行できたんですが。\n\n#### highlight.js対応\n\n前もやってたっけ？もはや記憶にないしコードもふっ飛ばした。\n\n### できなかったとこ\n\n#### gulpタスク内でSSR\n\n最初は楽勝だろと思ってたんですが、よく考えたらJSXをgulpから読み込まないといけないからクソめんどくない？って気づいて一気に嫌になりました。\n\n今は記事毎にrootと同じhtmlを作成して404にならないようにして、あとは遷移先でreact-routerがよしなにやってくれるのに任せてます。\n\ngulp-babelとか使えばできそうではあります。\n\n## 日記\n\n長久手のイオンに行ってきました。\n\nインナーバッグがほしいなーってのと、自転車に乗っておきたいなーっていう理由で。\n\nイオンっていうと吹き抜けが凄いイメージだったけど、そうじゃなかったので意外だった。あと、混みすぎ。\n","20180614-thumbnail.gif","https://media.graphcms.com/rCgsZH0TyCTOPgxkQPRw")</script><script src="/_nuxt/6295a1b0c88350517bfa.js" defer></script><script src="/_nuxt/5554f126381a287eecf5.js" defer></script><script src="/_nuxt/6affb985f9883ce20979.js" defer></script><script src="/_nuxt/35c31960731efb724d46.js" defer></script><script data-n-head="true" src="https://polyfill.io/v3/polyfill.min.js?features=default%2Ces2015%2Ces2016%2Ces2017%2CIntersectionObserver&flags=gated" type="text/javascript" data-body="true" defer crossorigin="anonymous"></script>
  </body>
</html>
