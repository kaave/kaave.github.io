{"key":"pixi-glitch","content":"<h2 id=\"-\">モチベ</h2>\n<p>別にメディアアートまでいかなくてもいいけどTOPにばばばんと表示されてる画像や背景に表示している画像にエフェクトをかけたりしてみたいなぁというモチベが一年くらい前からくすぶってたんですが、ついに大きな&quot;炎&quot;になったので取り組んでみました。</p>\n<p>まずはライブラリの選択からじゃーってことでPixi.jsかThree.jsのどっちかをかじろうと考えた結果、Pixi.jsをやることに。</p>\n<p>で、色々ぐぐってたら<a href=\"https://github.com/ktingvoar/PixiGlitch\">良さげなコード</a>を発見したんですが結構長いこと更新されておらず、最新のバージョンだと動かなかった&amp;サンプルがイマイチだったので自分でそのへんを更新してみました。</p>\n<h3 id=\"-\">制作物</h3>\n<ul>\n<li><a href=\"https://romantic-fermat-4102af.netlify.com/filter.html\">Demo</a></li>\n<li><a href=\"https://github.com/kaave/playground-pixi-js\">Repository</a><ul>\n<li>面倒くさくて検証用の環境使ってそのまま書いちゃってるのでそのうち移転するかも。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"demo-\">Demoについて</h3>\n<h4 id=\"-\">操作方法</h4>\n<ul>\n<li>左上のプルダウンからエフェクトかける対象を選択できます。プリセット画像、デバイスのカメラ、アップロード画像のいずれかとなります。<ul>\n<li>アップロード画像はgif, jpg, pngに対応しています。</li>\n<li>アップロードフォームを隠してプルダウンの選択で発火するようにしたかったんですがセキュリティの関係でアウツ。なんとかする方法ってあるんですかね？</li>\n</ul>\n</li>\n<li>右のフォームでエフェクトを選択します。<ul>\n<li>色系はON/OFFしかないです。</li>\n<li>その他は色々パラメータがあるんでついでにランダムもつけました。乱数のアルゴリズムは単なる<code>Math.random</code>なので微妙です。</li>\n</ul>\n</li>\n<li>キーボードでエフェクトのON/OFF、ランダムのON/OFFを設定できます。<ul>\n<li>フォームの名称右にカッコでくくられた一文字があると思いますが、そのキーを押すとON/OFFが切り替わります。</li>\n<li><code>shift</code>を押しながらでランダムのON/OFFが切り替わります。</li>\n<li><code>enter</code>ですべてのエフェクトがOFFになります。</li>\n<li><code>shift</code>を押しながら<code>enter</code>ですべてのランダムがOFFになります。</li>\n<li>とりあえず<code>a</code>を叩いて<code>shift+a</code>を叩き、ほかをいじってくのがおもしろいです！ソースはもちろんカメラで！</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"netlify\">Netlify</h4>\n<p>GitHub Pagesでもよかったんですが面倒くさかったのでNetlifyに。相も変わらず楽すぎます！もうちょっと回線がぶっとくなるといいなぁ。</p>\n<h3 id=\"-\">コードとかそのへん</h3>\n<h4 id=\"webpack-\">webpackさまさま</h4>\n<p>シェーダーのコードを<code>.frag</code>で別ファイルに構築し、<code>raw-loader</code>で読み込む環境を作りました。これが非常にいい感じ。</p>\n<h4 id=\"typescript-pixi-js\">TypeScriptでPixi.js</h4>\n<p>どうも型ファイルが色々と変でいくつか<code>any</code>でごまかしました。あんまいいことじゃないけど。だって型ファイルに手ぇ入れてプルリク出すほどPixi.jsわかんないんで。</p>\n<h4 id=\"-\">シェーダーわからん</h4>\n<p>これは&quot;特殊技能&quot;でWeb屋にこれを求めたらいかんなという印象ですがいかがなもんでしょう…。</p>\n<h4 id=\"web-pixi-js-\">Webアクセシビリティに準拠したPixi.jsの使い方</h4>\n<p>今回は画像をゴリゴリやってるだけなので<code>role=&quot;presentation&quot;</code>つけときゃとりあえずいいかなって内容なんですが、例えばキャッチコピーをばんとテキストで入れてそいつをごりごりいじったときにどうすんのがいいんでしょう？</p>\n<p><code>canvas</code>に<code>aria-label</code>とか？そのうち調べよう・・・。</p>\n<h3 id=\"-\">今後</h3>\n<h4 id=\"-\">斜めに画像をちょん切りたい</h4>\n<p>あんまグリッチって感じじゃないけどどうやってやるのかまだ調べてないんですけど画像を斜めにスライスして個別に移動とかやりたいんですよね。</p>\n<h4 id=\"dom-\">DOMではできないテキスト表現</h4>\n<p>小さなテキストを死ぬほど描画していろいろやりたい。ファミコンをどついたような感じというか。DOMでやるより軽そうだし…。</p>\n<h4 id=\"-\">シェーダーはよくわかんない</h4>\n<p>上でも書いたけどわかんないのでネットで拾ってきたのをちょっとカスタムできるくらいで当面はいいかな。</p>\n<h4 id=\"-\">画面まるごと</h4>\n<p><a href=\"https://html2canvas.hertzen.com/\">html2canvas</a>でうまいこといけそうなんだけど、IEが立ちはだかるのであった。IEいらん案件がでてきたらやってみたいね。</p>\n","date":"2018-06-14T00:00:00.000Z","title":"Pixi.jsでGlitch","tags":["JavaScript","PixiJS","WebGL"],"thumbnail":"2018-06-14_thumbnail.gif","publish":true}